<!DOCTYPE html>
<html>
<head>
<title>NOVUS</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">

<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:'Poppins',sans-serif;}

body{
height:100vh;
display:flex;
justify-content:center;
align-items:center;
overflow:hidden;
background:radial-gradient(circle at 30% 30%,#0f2027,#050510 70%);
position:relative;
color:white;
}

/* ‚≠ê Stars */
.stars{
position:absolute;
width:100%;
height:100%;
background:url("https://www.transparenttextures.com/patterns/stardust.png");
animation:twinkle 4s infinite alternate;
opacity:0.6;
}
@keyframes twinkle{from{opacity:0.4;}to{opacity:0.8;}}

/* üå† Shooting Star */
.shooting-star{
position:absolute;
top:15%;
left:-100px;
width:3px;height:3px;
background:white;
box-shadow:0 0 10px white;
animation:shoot 6s linear infinite;
}
@keyframes shoot{
0%{transform:translateX(0) translateY(0);}
100%{transform:translateX(1200px) translateY(300px);}
}

/* üåå Nebula */
.nebula{
position:absolute;
width:400px;height:400px;
background:radial-gradient(circle,#4cc9f0,#3a0ca3,#000);
border-radius:50%;
filter:blur(120px);
opacity:0.5;
animation:float 8s ease-in-out infinite alternate;
}
@keyframes float{from{transform:translateY(-20px);}to{transform:translateY(20px);}}

/* Parallax */
.parallax{
position:absolute;
width:100%;
height:100%;
display:flex;
justify-content:center;
align-items:center;
transition:transform 0.1s;
}

/* Card */
.card{
width:850px;
display:flex;
border-radius:25px;
backdrop-filter:blur(20px);
background:rgba(255,255,255,0.08);
box-shadow:0 0 40px rgba(0,0,0,0.6);
overflow:hidden;
z-index:5;
}

.left{
flex:1;
display:flex;
flex-direction:column;
justify-content:center;
align-items:center;
padding:40px;
background:linear-gradient(135deg,#4361ee,#7209b7);
}

.left h1{font-size:42px;letter-spacing:3px;}

.right{flex:1;padding:40px;}

label{font-size:13px;}

input,select{
width:100%;
padding:10px;
margin:8px 0 15px 0;
border-radius:10px;
border:none;
background:rgba(255,255,255,0.15);
color:white;
}

button{
width:100%;
padding:11px;
border:none;
border-radius:25px;
background:linear-gradient(90deg,#00c6ff,#0072ff);
color:white;
font-weight:600;
cursor:pointer;
transition:0.3s;
}

button:hover{
transform:scale(1.05);
box-shadow:0 0 20px #00c6ff;
}

.links{text-align:center;margin-top:10px;font-size:13px;}
.links span{cursor:pointer;display:block;margin-top:5px;}
.hidden{display:none;}

@media(max-width:900px){
.card{flex-direction:column;width:90%;}
}
</style>
</head>

<body>

<div class="stars"></div>
<div class="shooting-star"></div>
<div class="nebula" style="top:10%;left:60%;"></div>
<div class="nebula" style="bottom:5%;left:10%;"></div>

<div class="parallax" id="parallax">

<div class="card">

<div class="left">
<h1>NOVUS</h1>
<p>Maverick Onboarding System üöÄ</p>
</div>

<div class="right">

<!-- LOGIN -->
<div id="loginForm">
<label>Login As</label>
<select id="loginRole">
<option value="fresher">Fresher</option>
<option value="admin">Admin</option>
</select>

<label>Email</label>
<input type="email" id="loginEmail">

<label>Password</label>
<input type="password" id="loginPassword">

<button onclick="login()">Sign In</button>

<div class="links">
<button onclick="showCreate()">Create Account</button>
<span onclick="showForgot()">Forgot Password?</span>
</div>
</div>

<!-- SIGNUP -->
<div id="createForm" class="hidden">
<label>Full Name</label>
<input type="text" id="fullName">

<label>Email</label>
<input type="email" id="signupEmail">

<label>Password</label>
<input type="password" id="signupPassword">

<label>Confirm Password</label>
<input type="password" id="confirmPassword">

<label>Role</label>
<select id="signupRole">
<option value="fresher">Fresher</option>
<option value="admin">Admin</option>
</select>

<button onclick="signup()">Create Account</button>

<div class="links">
<span onclick="showLogin()">Back to Login</span>
</div>
</div>

<!-- FORGOT -->
<div id="forgotForm" class="hidden">
<label>Email</label>
<input type="email" id="resetEmail">

<button onclick="resetPassword()">Send Reset Link</button>

<div class="links">
<span onclick="showLogin()">Back to Login</span>
</div>
</div>

</div>
</div>
</div>

<script>
/* Parallax */
document.addEventListener("mousemove", function(e){
const x=(window.innerWidth/2-e.pageX)/40;
const y=(window.innerHeight/2-e.pageY)/40;
document.getElementById("parallax").style.transform=`translate(${x}px,${y}px)`;
});

/* Form Switch */
function showCreate(){
loginForm.classList.add("hidden");
createForm.classList.remove("hidden");
forgotForm.classList.add("hidden");
}
function showForgot(){
loginForm.classList.add("hidden");
createForm.classList.add("hidden");
forgotForm.classList.remove("hidden");
}
function showLogin(){
loginForm.classList.remove("hidden");
createForm.classList.add("hidden");
forgotForm.classList.add("hidden");
}
</script>

<!-- üî• FIREBASE START üî• -->
<script type="module">

import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, sendPasswordResetEmail } 
from "https://www.gstatic.com/firebasejs/10.12.0/firebase-auth.js";
import { getFirestore, doc, setDoc, getDoc } 
from "https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyDPe0Zp69bnM9251w0FfnH1UPhGedGh4qo",
  authDomain: "novus-9dfb8.firebaseapp.com",
  projectId: "novus-9dfb8",
  storageBucket: "novus-9dfb8.appspot.com",
  messagingSenderId: "641276518161",
  appId: "1:641276518161:web:ee2c11e2662e86e59bb6b0"
};

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);
const db = getFirestore(app);

/* SIGNUP */
window.signup = async function(){
const name=fullName.value;
const email=signupEmail.value;
const password=signupPassword.value;
const confirm=confirmPassword.value;
const role=signupRole.value;

if(password!==confirm){alert("Passwords do not match!");return;}

try{
const userCredential=await createUserWithEmailAndPassword(auth,email,password);
const user=userCredential.user;

await setDoc(doc(db,"users",user.uid),{
name:name,
role:role,
onboardingPercentage:0,
assessmentPercentage:0,
certificationPercentage:0,
overallScore:0,
professionalSummary:""
});

alert("Account Created!");
showLogin();

}catch(error){alert(error.message);}
}

/* LOGIN */
window.login = async function(){
const email=loginEmail.value;
const password=loginPassword.value;
const selectedRole=loginRole.value;

try{
const userCredential=await signInWithEmailAndPassword(auth,email,password);
const user=userCredential.user;

const docSnap=await getDoc(doc(db,"users",user.uid));
if(!docSnap.exists()){alert("User data not found!");return;}

const actualRole=docSnap.data().role;
if(actualRole!==selectedRole){alert("Wrong role selected!");return;}

if(actualRole==="admin"){
window.location.href="AdminDashboard.html";
}else{
window.location.href="FresherDashboard.html";
}

}catch(error){alert(error.message);}
}

/* RESET */
window.resetPassword=function(){
sendPasswordResetEmail(auth,resetEmail.value)
.then(()=>alert("Reset link sent!"))
.catch(error=>alert(error.message));
}

</script>
<!-- üî• FIREBASE END üî• -->

</body>
</html>
