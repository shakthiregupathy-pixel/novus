<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Assignment Module</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

<style>
body{
  background: linear-gradient(135deg,#c9b6f3,#8ec5fc);
  font-family: Inter, sans-serif;
}

.page{display:none}
.page.active{display:block}

.card{
  border-radius:16px;
  box-shadow:0 10px 25px rgba(0,0,0,.1);
}

.option:hover{background:#eef2ff; cursor:pointer}
.option.active{background:#198754; color:#fff}

.result-box{
  background:#fff;
  border-radius:16px;
  padding:25px;
  box-shadow:0 12px 30px rgba(0,0,0,.15);
}

/* ðŸŽ‰ CONFETTI */
.confetti{
  position:fixed;
  width:8px;
  height:8px;
  top:-10px;
  animation:fall linear forwards;
}
@keyframes fall{
  to{transform:translateY(110vh) rotate(360deg); opacity:0}
}
</style>
</head>

<body>
<div class="container my-4">

<!-- ASSIGNMENT SELECT -->
<div id="select" class="page active">
  <h3 class="mb-3">ðŸ“˜ Assignments</h3>
  <div class="row g-3">
    <div class="col-md-4"><div class="card p-4 text-center">
      <h5>Assignment 1</h5>
      <button class="btn btn-primary" onclick="startAssignment(0)">Start</button>
    </div></div>
    <div class="col-md-4"><div class="card p-4 text-center">
      <h5>Assignment 2</h5>
      <button class="btn btn-primary" onclick="startAssignment(1)">Start</button>
    </div></div>
    <div class="col-md-4"><div class="card p-4 text-center">
      <h5>Assignment 3</h5>
      <button class="btn btn-primary" onclick="startAssignment(2)">Start</button>
    </div></div>
  </div>
</div>

<!-- QUIZ -->
<div id="quiz" class="page">
  <div class="card p-4">
    <h5 id="assignTitle"></h5>
    <p>Question <span id="qIndex"></span> / 10</p>
    <h6 id="questionText"></h6>
    <div id="options" class="mt-3"></div>
    <button id="nextBtn" class="btn btn-secondary mt-3" onclick="nextQuestion()">Next</button>
    <button id="submitBtn" class="btn btn-success mt-3 d-none" onclick="submitAssignment()">Submit</button>
  </div>
</div>

<!-- RESULT -->
<div id="result" class="page">
  <div class="result-box text-center">
    <h4>ðŸŽ‰ Assignment Submitted</h4>
    <p><strong>Score:</strong> <span id="finalScore"></span> / 20</p>
    <p>Status: Submitted</p>

    <!-- âœ… NEW BUTTON -->
    <button class="btn btn-success mt-3" onclick="goToAssessmentDashboard()">
      Go to Assessment Dashboard
    </button>
  </div>
</div>

</div>

<script>
/* ================= APTITUDE QUESTIONS ================= */
const assignments = [ /* SAME QUESTIONS â€“ UNCHANGED */ ];

let aIndex=0,qIndex=0,score=0,selected=null;

function show(id){
  document.querySelectorAll('.page').forEach(p=>p.classList.remove('active'));
  document.getElementById(id).classList.add('active');
}

function startAssignment(i){
  aIndex=i; qIndex=0; score=0; selected=null;
  show('quiz'); loadQuestion();
}

function loadQuestion(){
  const q=assignments[aIndex][qIndex];
  document.getElementById('assignTitle').innerText=`Assignment ${aIndex+1}`;
  document.getElementById('qIndex').innerText=qIndex+1;
  document.getElementById('questionText').innerText=q.q;

  const opt=document.getElementById('options');
  opt.innerHTML="";
  q.o.forEach((op,i)=>{
    const d=document.createElement("div");
    d.className="option border rounded p-2 mb-2";
    d.innerText=op;
    d.onclick=()=>selectOption(i,d);
    opt.appendChild(d);
  });

  document.getElementById('nextBtn').classList.remove('d-none');
  document.getElementById('submitBtn').classList.add('d-none');
}

function selectOption(i,el){
  selected=i;
  document.querySelectorAll('.option').forEach(o=>o.classList.remove('active'));
  el.classList.add('active');
}

function nextQuestion(){
  if(selected===null){alert("Select an option");return;}
  if(selected===assignments[aIndex][qIndex].a) score+=2;
  selected=null; qIndex++;

  if(qIndex<9) loadQuestion();
  else{
    loadQuestion();
    document.getElementById('nextBtn').classList.add('d-none');
    document.getElementById('submitBtn').classList.remove('d-none');
  }
}

function submitAssignment(){
  if(selected!==null && selected===assignments[aIndex][qIndex].a) score+=2;
  document.getElementById('finalScore').innerText=score;
  launchConfetti();
  show('result');
}

/* ðŸŽ¯ NEW REDIRECT FUNCTION */
function goToAssessmentDashboard(){
  // later you can save to Firebase here
  window.location.href = "assessment-dashboard.html";
}

/* ðŸŽ‰ CONFETTI */
function launchConfetti(){
  const colors=["#22c55e","#6366f1","#f59e0b","#ec4899","#8b5cf6"];
  for(let i=0;i<80;i++){
    const c=document.createElement("div");
    c.className="confetti";
    c.style.left=Math.random()*100+"vw";
    c.style.background=colors[Math.floor(Math.random()*colors.length)];
    c.style.animationDuration=2+Math.random()*3+"s";
    document.body.appendChild(c);
    setTimeout(()=>c.remove(),5000);
  }
}
</script>

</body>
</html>
